const express = require('express');
const streamController = require('../controllers/streams');
const cors = require('cors');

var corsOptions = {
  origin: 'http://example.com',
  optionsSuccessStatus: 200 // some legacy browsers (IE11, various SmartTVs) choke on 204
}

module.exports = (context) => {
  let router = express.Router();
  router.post('/trans', cors(corsOptions), streamController.postStreamTrans.bind(context));
  router.get('/', streamController.getStreams.bind(context));
  router.get('/:app/:stream', streamController.getStream.bind(context));
  router.delete('/:app/:stream', streamController.delStream.bind(context));
  return router;
};
